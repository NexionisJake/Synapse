<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Values Chart Test - Synapse</title>
    <link rel="stylesheet" href="static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
    <div class="container glass-panel-strong" style="max-width: 800px; margin: 2rem auto; padding: 2rem;">
        <header>
            <h1 class="hud-title">Core Values Radar Chart Test</h1>
            <p class="hud-subtitle">Testing enhanced Core Values visualization with glassmorphism effects</p>
        </header>
        
        <div class="hud-divider glow"></div>
        
        <main>
            <!-- Charts Section -->
            <section class="charts-section hud-card">
                <div class="section-header">
                    <h2 class="hud-title" style="font-size: 1.2rem; margin: 0;">Core Values Analysis</h2>
                    <button id="refresh-chart" class="hud-button secondary" style="padding: 6px 12px; font-size: 0.8rem;">
                        <span class="button-icon">â†»</span>
                        Refresh
                    </button>
                </div>
                <div class="charts-grid">
                    <!-- Core Values Radar Chart -->
                    <div class="chart-container glass-panel" id="core-values-container">
                        <div class="chart-header">
                            <h4 class="chart-title">Core Values</h4>
                            <div class="chart-status loading" id="core-values-status">Loading...</div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="core-values-chart" width="300" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Test Controls -->
            <section class="hud-card" style="margin-top: 2rem;">
                <h3 class="hud-title" style="font-size: 1rem; margin-bottom: 1rem;">Test Controls</h3>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button id="test-sample-data" class="hud-button primary">Load Sample Data</button>
                    <button id="test-memory-data" class="hud-button secondary">Load Memory Data</button>
                    <button id="test-random-data" class="hud-button secondary">Generate Random Data</button>
                </div>
            </section>
            
            <!-- Data Display -->
            <section class="hud-card" style="margin-top: 2rem;">
                <h3 class="hud-title" style="font-size: 1rem; margin-bottom: 1rem;">Current Data</h3>
                <pre id="data-display" style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; color: #C9D1D9; font-family: monospace; font-size: 0.9rem; overflow-x: auto;"></pre>
            </section>
        </main>
    </div>
    
    <script src="static/js/cognitive-charts.js"></script>
    <script>
        // Test script for Core Values chart
        let chartManager;
        
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize chart manager
            chartManager = new CognitiveChartManager();
            chartManager.init();
            
            // Bind test controls
            document.getElementById('test-sample-data').addEventListener('click', testSampleData);
            document.getElementById('test-memory-data').addEventListener('click', testMemoryData);
            document.getElementById('test-random-data').addEventListener('click', testRandomData);
            document.getElementById('refresh-chart').addEventListener('click', refreshChart);
            
            // Load initial sample data
            testSampleData();
        });
        
        function testSampleData() {
            const sampleData = {
                labels: ['Creativity', 'Stability', 'Learning', 'Curiosity', 'Analysis', 'Empathy'],
                values: [4.2, 3.8, 4.7, 4.5, 3.9, 4.1]
            };
            
            chartManager.createCoreValuesChart(sampleData);
            updateDataDisplay('Sample Data', sampleData);
        }
        
        function testMemoryData() {
            // Simulate processing memory.json data
            fetch('/memory.json')
                .then(response => response.json())
                .then(data => {
                    const processedData = chartManager.processMemoryDataForCharts(data);
                    chartManager.createCoreValuesChart(processedData.coreValues);
                    updateDataDisplay('Memory Data', processedData.coreValues);
                })
                .catch(error => {
                    console.error('Error loading memory data:', error);
                    // Fallback to sample data
                    testSampleData();
                });
        }
        
        function testRandomData() {
            const randomData = {
                labels: ['Creativity', 'Stability', 'Learning', 'Curiosity', 'Analysis', 'Empathy'],
                values: Array.from({length: 6}, () => Math.round((Math.random() * 4 + 1) * 10) / 10)
            };
            
            chartManager.createCoreValuesChart(randomData);
            updateDataDisplay('Random Data', randomData);
        }
        
        function refreshChart() {
            if (chartManager) {
                chartManager.refreshCharts();
            }
        }
        
        function updateDataDisplay(source, data) {
            const display = document.getElementById('data-display');
            display.textContent = `Source: ${source}\n\n${JSON.stringify(data, null, 2)}`;
        }
    </script>
</body>
</html>